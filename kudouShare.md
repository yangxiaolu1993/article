对于开发者来说，bug与新需求都不是最大的难题，在其他人员的代码上进行二次开发可能是最头疼的一件事情。主要是因为不能按照自己的思路、逻辑进行开发，需要先了解他人的思路、逻辑，并在此基础上进行二次开发。对于酷兜来说，2020年是关键的一年，但是酷兜的代码经过多次的版本迭代、功能优化，代码已经变的冗余严重、逻辑不清楚，再加上底层架构版本过低，兼容性不加，用户体验不佳。为了更好的满足2020年酷兜快速迭代更新的需求以及性能要求，提高用户体验。开发人员与产品一致决定进行前端的重构。  

* 使用NutUI组件库
* 技术栈中增加 Typescript 
* 布局使用100%
* 浏览器history

### NutUI组件库
在JQuery横行霸道的时候，UI视觉库称为框架，随着技术的不断更新、发展，使用Vue、React单页面开发越来越流行，逐渐替代了JQuery开发方式。单页面开发是以组件为主，所以UI框架也就改名为UI组件库。  
对于前端开发引入UI组件库，不仅能够减少自己的代码量，提高开发效率，而且组件库经过多次的用户反馈，版本迭代，功能已经很完善，能有效的减少bug与兼容性的出现。但是现在开源的UI组件库琳琅满目，选择一款合适的UI组件库尤为重要。  
酷兜以vue为技术栈的移动端项目。选择一款合适的ui组件成了重构的第一件事。现在流行的开源的移动端UI组件库主要有mint-ui、vant、nutui等，到底哪个组件库更合适酷兜。先来对比一下这几个组件库更新时间。

|        | 团队 |  GitHub最后更新时间 | 简介 | 
|  ----  | ----  | ---- | ---- | 
| mint-ui  | 饿了么团队开发、维护 | 2018年1月16号 | |
| vant | 有赞团队开发，维护 | 2020年4月5号 |  Vant是一个轻量、可靠的移动端 Vue 组件库  |
| nutui | 京东团队开发、维护 | 2020年4月3号 |  一套京东风格的轻量级移动端Vue组件库  |  

任何一个开发人员都不敢肯定自己写的组件可以适用于任何的业务场景，较高的更新时间可以说明该组件在日常维护中，不用担心在开发过程中，组件bug与解答无人理会，导致失去使用组件库的价值。从更新时间和维护团队来说，vant和nutui在这4个组件库中更胜一筹。

|    功能    | mint-ui |  vant |  nutui |
|  ----  | ----  | ---- |  ---- |
| 上拉加载、下拉刷新 | √ |  × | √|
| Dialog对话框  |  √ |  √ | √| 
| Toast 吐司  |  √ |  √  | √|
| 回到顶部  |  × |  × | √|
| 左滑删除  |  × |  √  | √| 
| 上传  |  × |  √ | √|
| Popup 弹出层  |  √ |  √  | √|
| Stepper 步进器  |  × |  √  | √| 
| 图片懒加载  |  √ |  ×  | √| 
| 时间轴  |  × |  √ | √|
| 搜索栏  |  √ |  √ | √|
| 商品价格  |  × |  × |  √|
| 徽标  |  √ |  × |  √|

选择一个适合的组件库还有更重要的一点就是组件库的使用率，从酷兜需要的功能组件的使用率来说，nutui无疑是最佳的选择。

当然选择nutui组件库并不单单是因为更新频率与使用率，还有最重要的一点就是nutui组件库兼容了vue+typescript的开发方式。现在typescript开发逐渐成为主流，而且vue3.0也是使用typescript开发，这就更加肯定了，酷兜使用nutui组件库进行重构。

### Typescript中的装饰器
从2018年vue开始重写到vue3.0源码的公布，大家一直期待vue3.0的正式发布，在这两年的时间里，我们听到最多关于vue3.0的话可能就是vue3.0使用了typescript。为了更好的兼容之后的vue版本，也为了增加代码的可读性与可维护性，在酷兜V2.2版本我们加入的了typescript。